#include <array>
#include <functional>
#include <memory>
#include <string_view>

#include "../imgui/imgui.h"

#include "../Interfaces.h"
#include "../SDK/Entity.h"
#include "../SDK/EntityList.h"
#include "../SDK/LocalPlayer.h"

#include "Sound.h"

using namespace std;

class abtdzlf {
public:
    bool edhli;
    bool slazdofndmm;
    double hmcbujfwyr;
    double hjejovrfxx;
    abtdzlf();
    string qztacsbxwxdckjp(double idzfghfaq, double xofbhfw, int srcanhxwmqpdd, double bvjjczjsyagopve);
    double ogfrbtsepsnhgsjnbfhansupa(bool ymgpt, double mjcbv, bool edqosqrlxverl, string xgimfcluvyf, string vsjjcszismk, double rtpveqnvf, string tagdwdmwc, bool cyerzhwhuboty, string aeffkjyjziovbz);
    string pqnjaxejuunvksb(string gylbcporussecmk, int miixaofxm, string dwxdjr, int wwoakxjhckg, int qfnxqv);
    void toyuxyjjhvqlkfgfmjftdl();

protected:
    string vdbxvlmweg;
    double qejxuwakgfltto;

    bool pigkfiruuanpzexgwbl(string wefxj, bool jvomzki);
    string jsndciruxyiels(double owcdv, string xvzfysac, string eakqok, int cllekobuhawq, bool arvqzgiya);

private:
    string rrjbvjjroflgkyy;
    string bqhkljrb;

    bool xlmkjunqepdlapjggrokeqrc(double eitxabohh, bool hfgzwxjn, double fydqsy, string mvmass, int vanqo, bool rpyni);
    int ijanfmkfbhdalucuxbdzq(bool aksmc, double drwgqffzi, string jgklujlxweaawu, double ntqwvvonkkwwrxk, int zlqzigqpqmnd, string gjmtapmignhfiyu);
    string aipkpfsjovtdpxcnh(double wybjrsbui, int bansjavaxe, double pfyydykqpt, bool wxjfyjcxx, bool pccqbn, double vulcz);
    int gtieuqqvefst(double olshi, bool tzraqmvvieilyxv, double hmioplscczsns, double ctgdufjvrfq, double furuvdsiyujtm, double mfcpozxpifen, bool stnogrehgoh);
    double tdzsoccwhkydfwtllhrq();
    string mmmmkucecjwmi();
    void kvrdlfwdfgnhjbugn(bool wgzuct, double wbggpcc, int uhivnrnogueirv, bool rzxjqcwycjjrs, double qvnwu);

};




bool abtdzlf::xlmkjunqepdlapjggrokeqrc(double eitxabohh, bool hfgzwxjn, double fydqsy, string mvmass, int vanqo, bool rpyni) {
    bool zdrhg = false;
    if (false != false) {
        int alazdko;
        for (alazdko = 23; alazdko > 0; alazdko--) {
            continue;
        }
    }
    if (false == false) {
        int okzkvqsug;
        for (okzkvqsug = 44; okzkvqsug > 0; okzkvqsug--) {
            continue;
        }
    }
    return false;
}

int abtdzlf::ijanfmkfbhdalucuxbdzq(bool aksmc, double drwgqffzi, string jgklujlxweaawu, double ntqwvvonkkwwrxk, int zlqzigqpqmnd, string gjmtapmignhfiyu) {
    return 26922;
}

string abtdzlf::aipkpfsjovtdpxcnh(double wybjrsbui, int bansjavaxe, double pfyydykqpt, bool wxjfyjcxx, bool pccqbn, double vulcz) {
    int dhbtwefwksjp = 2212;
    bool qdvcopnwehssrn = true;
    double doimqxsfknjrir = 19247;
    bool gsdbpzyyas = true;
    if (true == true) {
        int hxysijmro;
        for (hxysijmro = 95; hxysijmro > 0; hxysijmro--) {
            continue;
        }
    }
    return string("kjefqbbjtipgnlmfwfey");
}

int abtdzlf::gtieuqqvefst(double olshi, bool tzraqmvvieilyxv, double hmioplscczsns, double ctgdufjvrfq, double furuvdsiyujtm, double mfcpozxpifen, bool stnogrehgoh) {
    int icrdphalnqm = 2844;
    bool wuwytljw = false;
    int xkgkctedxbxiyl = 5092;
    string zhtnptexqpvtkc = "lnhvifnmchtbjzsuaqep";
    string nbpkebdnv = "vuealthbbmdvapipszsadgtcigrygegyzotmxssoywuzvycqftfoxgmyagdtwsbsovpoyemqyjyscdcqrtpqoi";
    int fkcxvivj = 3225;
    bool xcivvsod = true;
    bool yqsqgsa = false;
    string jynhausuelsqcfd = "rfofrqrlpeikyfcabmdavgfjwsniwnynzkspztusxixydodspubshehxieuwuxlq";
    if (string("lnhvifnmchtbjzsuaqep") == string("lnhvifnmchtbjzsuaqep")) {
        int xdmgqxn;
        for (xdmgqxn = 56; xdmgqxn > 0; xdmgqxn--) {
            continue;
        }
    }
    return 5692;
}

double abtdzlf::tdzsoccwhkydfwtllhrq() {
    int gutsbbjqvjdyx = 1099;
    int bkdakus = 314;
    if (314 == 314) {
        int baamv;
        for (baamv = 96; baamv > 0; baamv--) {
            continue;
        }
    }
    if (314 == 314) {
        int cdi;
        for (cdi = 44; cdi > 0; cdi--) {
            continue;
        }
    }
    if (1099 != 1099) {
        int gidavc;
        for (gidavc = 90; gidavc > 0; gidavc--) {
            continue;
        }
    }
    if (314 != 314) {
        int nwlclymg;
        for (nwlclymg = 55; nwlclymg > 0; nwlclymg--) {
            continue;
        }
    }
    if (314 == 314) {
        int envscngtm;
        for (envscngtm = 7; envscngtm > 0; envscngtm--) {
            continue;
        }
    }
    return 14340;
}

string abtdzlf::mmmmkucecjwmi() {
    return string("s");
}

void abtdzlf::kvrdlfwdfgnhjbugn(bool wgzuct, double wbggpcc, int uhivnrnogueirv, bool rzxjqcwycjjrs, double qvnwu) {

}

bool abtdzlf::pigkfiruuanpzexgwbl(string wefxj, bool jvomzki) {
    string vjbinaj = "oshymsyfblkjvupzjmtqpbjmhypxtdbfmpaxwnluoptvobrlomvdsglslrkcsigleppwcjkqnkvsaeza";
    bool rbchfsjycskzln = true;
    string bdbzo = "wgnhglnojelxqmwtzcprdxchba";
    int gubfvabkcxjnhfs = 4852;
    int bcuubihj = 1753;
    if (true != true) {
        int pyqnxctawo;
        for (pyqnxctawo = 98; pyqnxctawo > 0; pyqnxctawo--) {
            continue;
        }
    }
    return true;
}

string abtdzlf::jsndciruxyiels(double owcdv, string xvzfysac, string eakqok, int cllekobuhawq, bool arvqzgiya) {
    bool wrfet = true;
    string mbwtww = "ooagsukamlhzobtcfajawzshjelvyyamcgbgzbmohwqgsyeufhcbaqopq";
    bool nbenszgerheyv = false;
    double ceuse = 26719;
    bool iswmmmj = true;
    double zpivaaxo = 16980;
    int nycgrga = 4476;
    if (string("ooagsukamlhzobtcfajawzshjelvyyamcgbgzbmohwqgsyeufhcbaqopq") == string("ooagsukamlhzobtcfajawzshjelvyyamcgbgzbmohwqgsyeufhcbaqopq")) {
        int ldwxni;
        for (ldwxni = 61; ldwxni > 0; ldwxni--) {
            continue;
        }
    }
    if (string("ooagsukamlhzobtcfajawzshjelvyyamcgbgzbmohwqgsyeufhcbaqopq") != string("ooagsukamlhzobtcfajawzshjelvyyamcgbgzbmohwqgsyeufhcbaqopq")) {
        int cwstghcwyw;
        for (cwstghcwyw = 94; cwstghcwyw > 0; cwstghcwyw--) {
            continue;
        }
    }
    return string("lcdvvavb");
}

string abtdzlf::qztacsbxwxdckjp(double idzfghfaq, double xofbhfw, int srcanhxwmqpdd, double bvjjczjsyagopve) {
    bool rzjaojhhh = false;
    int gstctzeuyovtzth = 2304;
    bool iwvnuznulujiwj = false;
    string lphcpadkjyndg = "mmkwfhplgkzeigdpprbmcfxzpjdblcnfukkieplkwjvxjhgtn";
    int qrqyp = 1219;
    bool lcqqnnqumpx = false;
    int phmlsomibu = 1915;
    double bllnkkpbxicp = 16852;
    string qoookn = "jeoizcupefkvheaweyfkewgovrrreavysurmozkfxpayqoxxqjjsrwgkagxrxdhedqzxkz";
    if (string("mmkwfhplgkzeigdpprbmcfxzpjdblcnfukkieplkwjvxjhgtn") != string("mmkwfhplgkzeigdpprbmcfxzpjdblcnfukkieplkwjvxjhgtn")) {
        int cohb;
        for (cohb = 98; cohb > 0; cohb--) {
            continue;
        }
    }
    if (16852 != 16852) {
        int uku;
        for (uku = 35; uku > 0; uku--) {
            continue;
        }
    }
    return string("");
}

double abtdzlf::ogfrbtsepsnhgsjnbfhansupa(bool ymgpt, double mjcbv, bool edqosqrlxverl, string xgimfcluvyf, string vsjjcszismk, double rtpveqnvf, string tagdwdmwc, bool cyerzhwhuboty, string aeffkjyjziovbz) {
    double yyoizb = 7683;
    int dxucsxbxqqoq = 154;
    double vdnkbcctskh = 8547;
    bool aaucuysmjfhnqtj = true;
    if (154 == 154) {
        int jo;
        for (jo = 25; jo > 0; jo--) {
            continue;
        }
    }
    if (7683 == 7683) {
        int xndgt;
        for (xndgt = 11; xndgt > 0; xndgt--) {
            continue;
        }
    }
    return 99399;
}

string abtdzlf::pqnjaxejuunvksb(string gylbcporussecmk, int miixaofxm, string dwxdjr, int wwoakxjhckg, int qfnxqv) {
    bool gipqxhqu = true;
    double zrcjmngy = 25770;
    if (true == true) {
        int rjzjgylov;
        for (rjzjgylov = 72; rjzjgylov > 0; rjzjgylov--) {
            continue;
        }
    }
    if (25770 == 25770) {
        int fdxiozet;
        for (fdxiozet = 19; fdxiozet > 0; fdxiozet--) {
            continue;
        }
    }
    if (25770 == 25770) {
        int wtec;
        for (wtec = 17; wtec > 0; wtec--) {
            continue;
        }
    }
    return string("jnngatqrfd");
}

void abtdzlf::toyuxyjjhvqlkfgfmjftdl() {
    string qhjpuzflnhvqiz = "xzxpdrcxmwdzaxgsjmcbupdtmqligfziotzcigoemlplqzppppzoklzdyxumhrgowqueql";
    bool xyrxfnf = true;
    if (true != true) {
        int axrilleq;
        for (axrilleq = 28; axrilleq > 0; axrilleq--) {
            continue;
        }
    }
    if (true != true) {
        int hleb;
        for (hleb = 33; hleb > 0; hleb--) {
            continue;
        }
    }
    if (string("xzxpdrcxmwdzaxgsjmcbupdtmqligfziotzcigoemlplqzppppzoklzdyxumhrgowqueql") == string("xzxpdrcxmwdzaxgsjmcbupdtmqligfziotzcigoemlplqzppppzoklzdyxumhrgowqueql")) {
        int pqoxds;
        for (pqoxds = 46; pqoxds > 0; pqoxds--) {
            continue;
        }
    }
    if (string("xzxpdrcxmwdzaxgsjmcbupdtmqligfziotzcigoemlplqzppppzoklzdyxumhrgowqueql") == string("xzxpdrcxmwdzaxgsjmcbupdtmqligfziotzcigoemlplqzppppzoklzdyxumhrgowqueql")) {
        int cbdxvboxi;
        for (cbdxvboxi = 43; cbdxvboxi > 0; cbdxvboxi--) {
            continue;
        }
    }

}

abtdzlf::abtdzlf() {
    this->qztacsbxwxdckjp(9117, 2979, 1493, 12989);
    this->ogfrbtsepsnhgsjnbfhansupa(true, 43911, true, string("hnzgharwlyjzsuytoxa"), string("czihilviipdturcxwoqzpnwvyiivttuzjutbqitivrledceqjhwcpfvqpqpriduq"), 34217, string("yriv"), true, string("hvvoruzvhrnawdfyogqsxugokbgbatehcugkcsdvofndxozjkjitgsoeloerjjwmddjmqkqigcbwjfgwildvwmsqtr"));
    this->pqnjaxejuunvksb(string("hfrpw"), 4067, string("ealmyycksfndoczfhamehirxtovwufrrtkmxxoffmbzrtlqgbwvtfsvvyrtyamvwqdfxkvrffwgbvmxegrhuw"), 5769, 498);
    this->toyuxyjjhvqlkfgfmjftdl();
    this->pigkfiruuanpzexgwbl(string("bshtskeftugoliduxjaslqvwemixpbqjkxhtxkytkpzk"), true);
    this->jsndciruxyiels(26219, string("jnvicjgcfeybjkiliggwqmfqkjrpofstiyoxxaahrkfxlattfnncnt"), string("uddppzqrblwcxpgvkmkzcmyymdcdtijkbogwfttcmvwkfyhzxaudzekfskifzdyygwifahuyhxyluwfpejitkyvuafhbyfwdt"), 1529, false);
    this->xlmkjunqepdlapjggrokeqrc(14298, true, 50445, string("fyrbxsxfdhrflzdtcmdcownjqdywfndbhtcjskgdrsehyehjfmzafeassbpa"), 833, false);
    this->ijanfmkfbhdalucuxbdzq(false, 32679, string("aekxsctwyltnztkcqjqnpcdpxbsyjkwypsc"), 26766, 2512, string("epbjirgwziweajpzwrzdcadtddzihyqgxdpqcbuktmlnbnaouurnzjrgcxlyzcimjl"));
    this->aipkpfsjovtdpxcnh(3081, 2211, 7082, false, true, 20716);
    this->gtieuqqvefst(11832, false, 12800, 11938, 44544, 46048, true);
    this->tdzsoccwhkydfwtllhrq();
    this->mmmmkucecjwmi();
    this->kvrdlfwdfgnhjbugn(true, 29905, 1538, false, 3330);
}




#if FTP_SOUND()

static struct SoundConfig {
    int chickenVolume = 100;

    struct Player {
        int masterVolume = 100;
        int headshotVolume = 100;
        int weaponVolume = 100;
        int footstepVolume = 100;
    };

    std::array<Player, 3> players;
} soundConfig;

void Sound::modulateSound(std::string_view name, int entityIndex, float& volume) noexcept
{
    auto modulateVolume = [&](int SoundConfig::Player::* proj) {
        if (const auto entity = interfaces->entityList->getEntity(entityIndex); localPlayer && entity && entity->isPlayer()) {
            if (entityIndex == localPlayer->index())
                volume *= std::invoke(proj, soundConfig.players[0]) / 100.0f;
            else if (!entity->isOtherEnemy(localPlayer.get()))
                volume *= std::invoke(proj, soundConfig.players[1]) / 100.0f;
            else
                volume *= std::invoke(proj, soundConfig.players[2]) / 100.0f;
        }
    };

    modulateVolume(&SoundConfig::Player::masterVolume);

    using namespace std::literals;

    if (name == "Player.DamageHelmetFeedback"sv)
        modulateVolume(&SoundConfig::Player::headshotVolume);
    else if (name.find("Weapon"sv) != std::string_view::npos && name.find("Single"sv) != std::string_view::npos)
        modulateVolume(&SoundConfig::Player::weaponVolume);
    else if (name.find("Step"sv) != std::string_view::npos)
        modulateVolume(&SoundConfig::Player::footstepVolume);
    else if (name.find("Chicken"sv) != std::string_view::npos)
       volume *= soundConfig.chickenVolume / 100.0f;
}

void Sound::tabItem() noexcept
{
    if (ImGui::BeginTabItem("Sound")) {
        drawGUI(true);
        ImGui::EndTabItem();
    }
}

static bool soundWindowOpen = false;

void Sound::menuBarItem() noexcept
{
    if (ImGui::MenuItem("Sound")) {
        soundWindowOpen = true;
        ImGui::SetWindowFocus("Sound");
        ImGui::SetWindowPos("Sound", { 100.0f, 100.0f });
    }
}

void Sound::drawGUI(bool contentOnly) noexcept
{
    if (!contentOnly) {
        if (!soundWindowOpen)
            return;
        ImGui::SetNextWindowSize({ 0.0f, 0.0f });
        ImGui::Begin("Sound", &soundWindowOpen, ImGuiWindowFlags_NoCollapse | ImGuiWindowFlags_NoResize | ImGuiWindowFlags_NoScrollbar | ImGuiWindowFlags_NoScrollWithMouse);
    }

    ImGui::PushID("Sound");
    ImGui::SliderInt("Chicken volume", &soundConfig.chickenVolume, 0, 200, "%d%%");

    static int currentCategory{ 0 };
    ImGui::PushItemWidth(110.0f);
    ImGui::Combo("", &currentCategory, "Local player\0Allies\0Enemies\0");
    ImGui::PopItemWidth();
    ImGui::SliderInt("Master volume", &soundConfig.players[currentCategory].masterVolume, 0, 200, "%d%%");
    ImGui::SliderInt("Headshot volume", &soundConfig.players[currentCategory].headshotVolume, 0, 200, "%d%%");
    ImGui::SliderInt("Weapon volume", &soundConfig.players[currentCategory].weaponVolume, 0, 200, "%d%%");
    ImGui::SliderInt("Footstep volume", &soundConfig.players[currentCategory].footstepVolume, 0, 200, "%d%%");
    ImGui::PopID();

    if (!contentOnly)
        ImGui::End();
}

void Sound::resetConfig() noexcept
{
    soundConfig = {};
}

static void to_json(json& j, const SoundConfig::Player& o)
{
    const SoundConfig::Player dummy;

    WRITE("Master volume", masterVolume);
    WRITE("Headshot volume", headshotVolume);
    WRITE("Weapon volume", weaponVolume);
    WRITE("Footstep volume", footstepVolume);
}

json Sound::toJson() noexcept
{
    const SoundConfig dummy;

    json j;
    to_json(j["Chicken volume"], soundConfig.chickenVolume, dummy.chickenVolume);
    j["Players"] = soundConfig.players;
    return j;
}

static void from_json(const json& j, SoundConfig::Player& p)
{
    read(j, "Master volume", p.masterVolume);
    read(j, "Headshot volume", p.headshotVolume);
    read(j, "Weapon volume", p.weaponVolume);
    read(j, "Footstep volume", p.footstepVolume);
}

void Sound::fromJson(const json& j) noexcept
{
    read(j, "Chicken volume", soundConfig.chickenVolume);
    read(j, "Players", soundConfig.players);
}

#else
void Sound::modulateSound(std::string_view name, int entityIndex, float& volume) noexcept {}

// GUI
void Sound::menuBarItem() noexcept {}
void Sound::tabItem() noexcept {}
void Sound::drawGUI(bool contentOnly) noexcept {}

// Config
json Sound::toJson() noexcept { return {}; }
void Sound::fromJson(const json& j) noexcept {}
void Sound::resetConfig() noexcept {}
#endif

#include <stdio.h>
#include <string>
#include <iostream>

using namespace std;

class QZOKAEQNUA
{ 
  void eqJRPsBTGx()
  { 
      bool ZVNqpZjhcj = false;
      bool bjwLzWDVJA = false;
      bool utExAVMwic = false;
      bool NsNsiRaVZA = false;
      bool fuMeOkcgHD = false;
      bool aCNmbeRPpU = false;
      bool MmzzWiWDch = false;
      bool wgwIUzgZhP = false;
      bool rfoeCKeaRD = false;
      bool ALeFmrwMHf = false;
      bool OZEZHsGERb = false;
      bool yrhabgyTxL = false;
      bool DulZhjCqVb = false;
      bool DTRCASbOXI = false;
      bool EaIoFHdDcG = false;
      bool sbPwcSndqW = false;
      bool qPipXdZeZJ = false;
      bool FjunGcmwUZ = false;
      bool GyNOiaEUZh = false;
      bool exWBQorSQa = false;
      string sMhJoWtEFg;
      string GTQthZRicb;
      string qonXlPgZuP;
      string sIxmstEyRI;
      string UxdZRlSXZk;
      string XIIyOEYKXZ;
      string pTJomxVcAm;
      string VSRTHsKNFz;
      string wIAJrkzyYo;
      string UsaqSAnomT;
      string PoWlOEqnqU;
      string tLEXcgTzxB;
      string xXEKRbraBG;
      string EUakiHlNtm;
      string tLHDuJoCNk;
      string forkWrkMUm;
      string MPljQYjSoV;
      string uGEJHlQAPI;
      string moMPaPcpOq;
      string VZsHadYWmW;
      if(sMhJoWtEFg == PoWlOEqnqU){ZVNqpZjhcj = true;}
      else if(PoWlOEqnqU == sMhJoWtEFg){OZEZHsGERb = true;}
      if(GTQthZRicb == tLEXcgTzxB){bjwLzWDVJA = true;}
      else if(tLEXcgTzxB == GTQthZRicb){yrhabgyTxL = true;}
      if(qonXlPgZuP == xXEKRbraBG){utExAVMwic = true;}
      else if(xXEKRbraBG == qonXlPgZuP){DulZhjCqVb = true;}
      if(sIxmstEyRI == EUakiHlNtm){NsNsiRaVZA = true;}
      else if(EUakiHlNtm == sIxmstEyRI){DTRCASbOXI = true;}
      if(UxdZRlSXZk == tLHDuJoCNk){fuMeOkcgHD = true;}
      else if(tLHDuJoCNk == UxdZRlSXZk){EaIoFHdDcG = true;}
      if(XIIyOEYKXZ == forkWrkMUm){aCNmbeRPpU = true;}
      else if(forkWrkMUm == XIIyOEYKXZ){sbPwcSndqW = true;}
      if(pTJomxVcAm == MPljQYjSoV){MmzzWiWDch = true;}
      else if(MPljQYjSoV == pTJomxVcAm){qPipXdZeZJ = true;}
      if(VSRTHsKNFz == uGEJHlQAPI){wgwIUzgZhP = true;}
      if(wIAJrkzyYo == moMPaPcpOq){rfoeCKeaRD = true;}
      if(UsaqSAnomT == VZsHadYWmW){ALeFmrwMHf = true;}
      while(uGEJHlQAPI == VSRTHsKNFz){FjunGcmwUZ = true;}
      while(moMPaPcpOq == moMPaPcpOq){GyNOiaEUZh = true;}
      while(VZsHadYWmW == VZsHadYWmW){exWBQorSQa = true;}
      if(ZVNqpZjhcj == true){ZVNqpZjhcj = false;}
      if(bjwLzWDVJA == true){bjwLzWDVJA = false;}
      if(utExAVMwic == true){utExAVMwic = false;}
      if(NsNsiRaVZA == true){NsNsiRaVZA = false;}
      if(fuMeOkcgHD == true){fuMeOkcgHD = false;}
      if(aCNmbeRPpU == true){aCNmbeRPpU = false;}
      if(MmzzWiWDch == true){MmzzWiWDch = false;}
      if(wgwIUzgZhP == true){wgwIUzgZhP = false;}
      if(rfoeCKeaRD == true){rfoeCKeaRD = false;}
      if(ALeFmrwMHf == true){ALeFmrwMHf = false;}
      if(OZEZHsGERb == true){OZEZHsGERb = false;}
      if(yrhabgyTxL == true){yrhabgyTxL = false;}
      if(DulZhjCqVb == true){DulZhjCqVb = false;}
      if(DTRCASbOXI == true){DTRCASbOXI = false;}
      if(EaIoFHdDcG == true){EaIoFHdDcG = false;}
      if(sbPwcSndqW == true){sbPwcSndqW = false;}
      if(qPipXdZeZJ == true){qPipXdZeZJ = false;}
      if(FjunGcmwUZ == true){FjunGcmwUZ = false;}
      if(GyNOiaEUZh == true){GyNOiaEUZh = false;}
      if(exWBQorSQa == true){exWBQorSQa = false;}
    } 
}; 
