#include <algorithm>
#include <cstring>
#include <deque>
#include <memory>
#include <string>
#include <string_view>
#include <tuple>
#include <unordered_map>

#include "Chams.h"
#include "../Config.h"
#include "../Helpers.h"
#include "../Hooks.h"
#include "../Interfaces.h"
#include "../Memory.h"
#include "Backtrack.h"
#include "../InputUtil.h"
#include "../SDK/ClassId.h"
#include "../SDK/ClientClass.h"
#include "../SDK/Entity.h"
#include "../SDK/EntityList.h"
#include "../SDK/GlobalVars.h"
#include "../SDK/LocalPlayer.h"
#include "../SDK/Material.h"
#include "../SDK/MaterialSystem.h"
#include "../SDK/ModelRender.h"
#include "../SDK/StudioRender.h"
#include "../SDK/KeyValues.h"
#include "../SDK/Utils.h"

using namespace std;

class gdauesc {
public:
    bool aorkxpfbjxxt;
    gdauesc();
    int yvedyyyofournwjno(double vcadpe, double haekhgf, int zmbcffambnmxbs, int wjscdjhygzxtv, bool jsynwebpgz, string lsfskbsbfvcef);

protected:
    int gyuvalvmemwh;
    string ghfizrwgfhkuf;
    bool vncanmhpcayjs;

    string ugyowszsxcdztmcnigqo(int aelzuqtyjbg, double wtbwxpnoxelds);
    string srkabbgzqhgiu(double jxqzgoiaqpvffv, bool jpwab, bool lvvcptkcz, bool xetzbaj, double kmgorvyjquxskmw, bool isztlfuuvvfmm);
    int wlpdgmiquvowdhewggwyv(double kgayeodrbjoiy, string phkmwuyjc, string stgrpyijnit, double twdymuqfhjavw, bool sqsixdzw, string clbudmhjzxm);
    double xwjjcpsgckjwmmit();
    double gourkgjbrejghschpt(int cwodetgbzloeoq, bool msvaiu, double sihewh, double ljasyffcuc, int xuyksufv, int dqydfmsksveweyi, int gfnmnzfb, double jmtubhnwu, bool jwkpbfwdklyz, int srzfmjagtljwgf);
    bool qeszgcrndtwuycx(bool fttypoo, int ginywnfhm, bool dzvjysysusku, bool kzsllq);
    bool rirvmifzdnysszmlvq(int nzfhehfajogchy, string pkdmyw, bool zfntotrmn, bool kcguhxrcnyqvvn, int uzkxperojwnrtt, double owtpzualtpqze, string cbtdnrvk, double zsdgeccfzs, string vyvdqzbgc, string lhwkdpnrdm);

private:
    double rjioqgdiwfbdn;

    double abykxesfotlyebpvntff(bool qdzmzcfb);
    double isovkhkbpgjkoetby(double cqhqdrixqymzku);
    void qgmhlwzvylknr();
    void wrlumxagvwdl(bool frokvadbsruli, bool xqpyb, bool ckdpgg);
    void xhkuselysd(string fmrtbcinmmrdfxe, string ffixize, string zwltfzqkd, bool beeoxnosvgp, string ukxtjkzxokhipe, string rjxrzltedoiop, int orncpvskmdn, double tcmrqgfujsn);
    string cydejkagqlidmhhm(string zksqhcfvzfr, string umshnifbfk, string lgknff, string nzsibqb, int awiixlxshpnx, double wmqwamxe, double ahezdsen, int cpriqbmwcokbty, bool jtgxxwohzml);
    double bmpjrtpewayysybjdh(bool bjtequmrqlbd);
    double dsaeoqozrtrzsiyihb(bool lqburkh, int utzetuwje);

};




double gdauesc::abykxesfotlyebpvntff(bool qdzmzcfb) {
    string cyewxeefzomewf = "laqwtilfdqosolhjwnxyhdpsdpwdsefhhsbczfmpxiqewutrfygzkj";
    double wpcdsehis = 9345;
    double kumpd = 17520;
    int tnemyogg = 255;
    double jeyxmyjxssbdsvp = 52329;
    if (17520 == 17520) {
        int ghqvczy;
        for (ghqvczy = 56; ghqvczy > 0; ghqvczy--) {
            continue;
        }
    }
    if (17520 == 17520) {
        int dwxbd;
        for (dwxbd = 47; dwxbd > 0; dwxbd--) {
            continue;
        }
    }
    if (255 != 255) {
        int vrg;
        for (vrg = 70; vrg > 0; vrg--) {
            continue;
        }
    }
    if (17520 != 17520) {
        int zrg;
        for (zrg = 0; zrg > 0; zrg--) {
            continue;
        }
    }
    return 13810;
}

double gdauesc::isovkhkbpgjkoetby(double cqhqdrixqymzku) {
    string jzejidmzylywa = "l";
    bool rrldsldkkyy = true;
    bool pszqwmwutzzv = true;
    double wsoiecmbefqrjb = 19174;
    double chnhnmgmk = 8097;
    double jcmtmru = 36491;
    double vguthzwpddt = 5709;
    bool tzzipzcwertee = false;
    if (string("l") == string("l")) {
        int ecopifdrwi;
        for (ecopifdrwi = 89; ecopifdrwi > 0; ecopifdrwi--) {
            continue;
        }
    }
    return 98161;
}

void gdauesc::qgmhlwzvylknr() {
    int hthofr = 1626;
    string gjaxnffveu = "wdpxqxanjpebmfqkspia";
    int iiqxanzxdd = 803;
    string dpfdrhavc = "hkbvbxnyihmsglhulvghrtlfhqpwnjvbytglwmckcpziwsyzlm";
    double kfalywwxj = 83656;
    int ggwdk = 3217;
    if (803 != 803) {
        int bsgnrymvr;
        for (bsgnrymvr = 21; bsgnrymvr > 0; bsgnrymvr--) {
            continue;
        }
    }

}

void gdauesc::wrlumxagvwdl(bool frokvadbsruli, bool xqpyb, bool ckdpgg) {

}

void gdauesc::xhkuselysd(string fmrtbcinmmrdfxe, string ffixize, string zwltfzqkd, bool beeoxnosvgp, string ukxtjkzxokhipe, string rjxrzltedoiop, int orncpvskmdn, double tcmrqgfujsn) {
    double iezkvd = 58551;
    bool lrvybiwrsxnbxa = true;
    string qxfanto = "dhwgyicl";
    string bftcrqdfygvrpha = "tntekqjcndjbaemllfyukwsmvixbnabsfntqxmqeesikxiokldwkdmvrlyklfrxagc";
    double qyngiqxzecbanu = 47451;
    bool smzczewsc = true;
    double qzsstzezqabnjjt = 75556;
    string cbrucp = "mrgtawhzhwvopxbaywjfwrkmjmnqngubhiki";
    if (75556 == 75556) {
        int yr;
        for (yr = 83; yr > 0; yr--) {
            continue;
        }
    }
    if (true == true) {
        int mpveyr;
        for (mpveyr = 67; mpveyr > 0; mpveyr--) {
            continue;
        }
    }

}

string gdauesc::cydejkagqlidmhhm(string zksqhcfvzfr, string umshnifbfk, string lgknff, string nzsibqb, int awiixlxshpnx, double wmqwamxe, double ahezdsen, int cpriqbmwcokbty, bool jtgxxwohzml) {
    string oicwtcibapacixv = "uvakkmpnhkbbxkykqbezseayyyszexkuoqjegnabnsldzlczvnpzycvwicrnzjztjmsaiyebefihrzaqagvadcukyigii";
    bool dapistbenuwu = false;
    int etohiyuby = 1173;
    bool uhbphdyfam = false;
    int pucef = 5690;
    int udysqluhte = 2609;
    if (1173 != 1173) {
        int tldevj;
        for (tldevj = 20; tldevj > 0; tldevj--) {
            continue;
        }
    }
    if (false == false) {
        int cepo;
        for (cepo = 59; cepo > 0; cepo--) {
            continue;
        }
    }
    return string("n");
}

double gdauesc::bmpjrtpewayysybjdh(bool bjtequmrqlbd) {
    double mkftoty = 26026;
    int hlhkvuuueznxan = 1067;
    double rkfum = 83780;
    string pdnpacy = "iicdqxwtxtnmvgcqjqtjspwoeaadsu";
    string teyerumfa = "ohkaxyxmlmqoufkejvzxtqgtdtyiqcdtqgpfknkpwqjmqttmixocpxpqjpajcqukjl";
    double gcrcfbx = 9855;
    if (string("ohkaxyxmlmqoufkejvzxtqgtdtyiqcdtqgpfknkpwqjmqttmixocpxpqjpajcqukjl") == string("ohkaxyxmlmqoufkejvzxtqgtdtyiqcdtqgpfknkpwqjmqttmixocpxpqjpajcqukjl")) {
        int xswure;
        for (xswure = 20; xswure > 0; xswure--) {
            continue;
        }
    }
    if (string("iicdqxwtxtnmvgcqjqtjspwoeaadsu") == string("iicdqxwtxtnmvgcqjqtjspwoeaadsu")) {
        int shdv;
        for (shdv = 43; shdv > 0; shdv--) {
            continue;
        }
    }
    if (string("ohkaxyxmlmqoufkejvzxtqgtdtyiqcdtqgpfknkpwqjmqttmixocpxpqjpajcqukjl") == string("ohkaxyxmlmqoufkejvzxtqgtdtyiqcdtqgpfknkpwqjmqttmixocpxpqjpajcqukjl")) {
        int pbsz;
        for (pbsz = 87; pbsz > 0; pbsz--) {
            continue;
        }
    }
    return 20098;
}

double gdauesc::dsaeoqozrtrzsiyihb(bool lqburkh, int utzetuwje) {
    string bcluqqm = "zbehoqakdlqtewmuwmclgahnfuhyaogfwigarrcbzaftrxoktgqkchsbngvefmusyeerrskfndnrtzwysbjkehiik";
    if (string("zbehoqakdlqtewmuwmclgahnfuhyaogfwigarrcbzaftrxoktgqkchsbngvefmusyeerrskfndnrtzwysbjkehiik") == string("zbehoqakdlqtewmuwmclgahnfuhyaogfwigarrcbzaftrxoktgqkchsbngvefmusyeerrskfndnrtzwysbjkehiik")) {
        int ggmiubb;
        for (ggmiubb = 47; ggmiubb > 0; ggmiubb--) {
            continue;
        }
    }
    if (string("zbehoqakdlqtewmuwmclgahnfuhyaogfwigarrcbzaftrxoktgqkchsbngvefmusyeerrskfndnrtzwysbjkehiik") == string("zbehoqakdlqtewmuwmclgahnfuhyaogfwigarrcbzaftrxoktgqkchsbngvefmusyeerrskfndnrtzwysbjkehiik")) {
        int esuv;
        for (esuv = 66; esuv > 0; esuv--) {
            continue;
        }
    }
    if (string("zbehoqakdlqtewmuwmclgahnfuhyaogfwigarrcbzaftrxoktgqkchsbngvefmusyeerrskfndnrtzwysbjkehiik") == string("zbehoqakdlqtewmuwmclgahnfuhyaogfwigarrcbzaftrxoktgqkchsbngvefmusyeerrskfndnrtzwysbjkehiik")) {
        int cn;
        for (cn = 100; cn > 0; cn--) {
            continue;
        }
    }
    if (string("zbehoqakdlqtewmuwmclgahnfuhyaogfwigarrcbzaftrxoktgqkchsbngvefmusyeerrskfndnrtzwysbjkehiik") != string("zbehoqakdlqtewmuwmclgahnfuhyaogfwigarrcbzaftrxoktgqkchsbngvefmusyeerrskfndnrtzwysbjkehiik")) {
        int dmt;
        for (dmt = 13; dmt > 0; dmt--) {
            continue;
        }
    }
    return 15263;
}

string gdauesc::ugyowszsxcdztmcnigqo(int aelzuqtyjbg, double wtbwxpnoxelds) {
    bool otyuus = true;
    int jszqaqwshq = 4291;
    double fhqmpvwplmkezt = 18929;
    string tkhnmttgi = "mypzwqabzznbuknkspfdpfktjwuulcbszpnhvdrirnpy";
    bool ubzehijtimotmob = false;
    bool vxgivlligfeelwy = true;
    int niyeopllwzv = 3357;
    bool iwvxa = false;
    string bcnuwqa = "vvutjhnwlkphvrwgwgsba";
    if (string("vvutjhnwlkphvrwgwgsba") == string("vvutjhnwlkphvrwgwgsba")) {
        int slontqc;
        for (slontqc = 93; slontqc > 0; slontqc--) {
            continue;
        }
    }
    if (string("vvutjhnwlkphvrwgwgsba") == string("vvutjhnwlkphvrwgwgsba")) {
        int nkk;
        for (nkk = 47; nkk > 0; nkk--) {
            continue;
        }
    }
    return string("wgc");
}

string gdauesc::srkabbgzqhgiu(double jxqzgoiaqpvffv, bool jpwab, bool lvvcptkcz, bool xetzbaj, double kmgorvyjquxskmw, bool isztlfuuvvfmm) {
    bool mqsbcjw = true;
    if (true == true) {
        int bfjtf;
        for (bfjtf = 52; bfjtf > 0; bfjtf--) {
            continue;
        }
    }
    if (true == true) {
        int ssss;
        for (ssss = 94; ssss > 0; ssss--) {
            continue;
        }
    }
    if (true != true) {
        int jsihntya;
        for (jsihntya = 70; jsihntya > 0; jsihntya--) {
            continue;
        }
    }
    return string("vjdypgjkpbfqr");
}

int gdauesc::wlpdgmiquvowdhewggwyv(double kgayeodrbjoiy, string phkmwuyjc, string stgrpyijnit, double twdymuqfhjavw, bool sqsixdzw, string clbudmhjzxm) {
    return 15927;
}

double gdauesc::xwjjcpsgckjwmmit() {
    int hkgrshpkwj = 75;
    string ivfvcy = "chpgltcpnthckkzkcukkchbllntnhfbdztngyqsuybnmsexwshslflutnpsanaxpsjbqmrkcmqqxnowizkoqlurxdc";
    if (string("chpgltcpnthckkzkcukkchbllntnhfbdztngyqsuybnmsexwshslflutnpsanaxpsjbqmrkcmqqxnowizkoqlurxdc") == string("chpgltcpnthckkzkcukkchbllntnhfbdztngyqsuybnmsexwshslflutnpsanaxpsjbqmrkcmqqxnowizkoqlurxdc")) {
        int nmeguob;
        for (nmeguob = 32; nmeguob > 0; nmeguob--) {
            continue;
        }
    }
    if (75 == 75) {
        int oqxcqus;
        for (oqxcqus = 18; oqxcqus > 0; oqxcqus--) {
            continue;
        }
    }
    if (75 == 75) {
        int pyjw;
        for (pyjw = 32; pyjw > 0; pyjw--) {
            continue;
        }
    }
    return 84485;
}

double gdauesc::gourkgjbrejghschpt(int cwodetgbzloeoq, bool msvaiu, double sihewh, double ljasyffcuc, int xuyksufv, int dqydfmsksveweyi, int gfnmnzfb, double jmtubhnwu, bool jwkpbfwdklyz, int srzfmjagtljwgf) {
    string grxrgm = "hfaliyvgshygthncdptrytxvvl";
    double pbpbzmmfmge = 33308;
    double csniflsfyfei = 60980;
    int dtlcxtbowcwo = 6523;
    int kqemlucjo = 166;
    if (60980 != 60980) {
        int zpjgnqsxpe;
        for (zpjgnqsxpe = 33; zpjgnqsxpe > 0; zpjgnqsxpe--) {
            continue;
        }
    }
    if (166 != 166) {
        int bu;
        for (bu = 26; bu > 0; bu--) {
            continue;
        }
    }
    if (string("hfaliyvgshygthncdptrytxvvl") == string("hfaliyvgshygthncdptrytxvvl")) {
        int db;
        for (db = 10; db > 0; db--) {
            continue;
        }
    }
    return 75598;
}

bool gdauesc::qeszgcrndtwuycx(bool fttypoo, int ginywnfhm, bool dzvjysysusku, bool kzsllq) {
    string xkfnuazcavrw = "mhongqyvyclsqxkgsylirtvgvhfkwvgikrshnxgmdryrgmjkyqezmlwtdzqiyosygellrrksnnggpdfoshkuadghbiidzcbxoamn";
    int kgbzuuj = 1403;
    double pgtssyyne = 928;
    bool yqumdqzfjlxqtj = true;
    double cjobauj = 96486;
    double tnokkxhjewsh = 20732;
    string euxjfacotmrt = "wzdhupcoyv";
    double ambtectmowm = 1010;
    string lpgqmvwp = "nkwcdvqfjvnviitfxlstfdqnosqpnedrhoxzavmmesjtnwmhoqmexyiqddnqhomzxllaluipruprhgjih";
    int hoiptwkzo = 907;
    return false;
}

bool gdauesc::rirvmifzdnysszmlvq(int nzfhehfajogchy, string pkdmyw, bool zfntotrmn, bool kcguhxrcnyqvvn, int uzkxperojwnrtt, double owtpzualtpqze, string cbtdnrvk, double zsdgeccfzs, string vyvdqzbgc, string lhwkdpnrdm) {
    string lhnpiorbz = "ypljomctolpehnmiqjvlnsybewxabuvn";
    if (string("ypljomctolpehnmiqjvlnsybewxabuvn") != string("ypljomctolpehnmiqjvlnsybewxabuvn")) {
        int gmk;
        for (gmk = 26; gmk > 0; gmk--) {
            continue;
        }
    }
    if (string("ypljomctolpehnmiqjvlnsybewxabuvn") != string("ypljomctolpehnmiqjvlnsybewxabuvn")) {
        int hsycnlqsg;
        for (hsycnlqsg = 7; hsycnlqsg > 0; hsycnlqsg--) {
            continue;
        }
    }
    return true;
}

int gdauesc::yvedyyyofournwjno(double vcadpe, double haekhgf, int zmbcffambnmxbs, int wjscdjhygzxtv, bool jsynwebpgz, string lsfskbsbfvcef) {
    int aaezifjockhfqk = 2826;
    int pfanp = 335;
    string bswcagbxmjyzocr = "thjxwyhhvfppydfjm";
    string cckenjctgrtk = "vhgfgmxpwznngatxjolzviiamsyde";
    int nezkdmpczw = 4740;
    if (2826 != 2826) {
        int tjpla;
        for (tjpla = 89; tjpla > 0; tjpla--) {
            continue;
        }
    }
    if (string("thjxwyhhvfppydfjm") != string("thjxwyhhvfppydfjm")) {
        int ihtxye;
        for (ihtxye = 28; ihtxye > 0; ihtxye--) {
            continue;
        }
    }
    if (string("vhgfgmxpwznngatxjolzviiamsyde") == string("vhgfgmxpwznngatxjolzviiamsyde")) {
        int ik;
        for (ik = 7; ik > 0; ik--) {
            continue;
        }
    }
    if (2826 == 2826) {
        int fhfsh;
        for (fhfsh = 42; fhfsh > 0; fhfsh--) {
            continue;
        }
    }
    return 57334;
}

gdauesc::gdauesc() {
    this->yvedyyyofournwjno(6665, 14269, 2137, 3107, true, string("gfwbkbnlraakdlmlyaoqnucatovqdlqxrqhgxmlwcgzobtohblpihjehsihwewkg"));
    this->ugyowszsxcdztmcnigqo(929, 13989);
    this->srkabbgzqhgiu(32544, false, false, false, 24936, false);
    this->wlpdgmiquvowdhewggwyv(23319, string("mdqdjmexfalypwsmbrfnnmnufdhtvcmtxpuhcxzthurycdzpuytizcjmtzijvqpuakeonvtznnhhmppms"), string("nkompivxyjczdqvcuvkelhgwlrplsbvauzfyocwfbicdmhqqmmakpgejojtxxuiwbbqfsenteputlgeszngo"), 47227, true, string("bachidymyidrnoecclqtxmsegmytlkjl"));
    this->xwjjcpsgckjwmmit();
    this->gourkgjbrejghschpt(150, false, 41980, 3461, 1776, 679, 2251, 41216, false, 2972);
    this->qeszgcrndtwuycx(true, 3554, false, true);
    this->rirvmifzdnysszmlvq(3563, string("duiihjpxuiywtjgueywdzywkvdfjkugwsdosnflwqalbaxxpanjsouav"), false, true, 1007, 47937, string("yyymrtpclowfkoetsndbstlfvxbbbjbtipbxnfywjywhdwayymtuzcavogeonwltpubtqoqtvicdneipqmsnmhkmbazmuhi"), 13421, string("ovgzbdlytvizjonggfcxogpxqjlcrkjetqtopnfwmh"), string("yfyksvrlrrzbutmdlxsmjnqwgkfkccuz"));
    this->abykxesfotlyebpvntff(true);
    this->isovkhkbpgjkoetby(52327);
    this->qgmhlwzvylknr();
    this->wrlumxagvwdl(false, true, true);
    this->xhkuselysd(string("rqarjrbvhxsfcmnvbdsfvswfzbitlmmycmuhdlmizqyjcbdoaueltdddleogupzptnkjbhiieijn"), string("hkhkjaxpix"), string("ikamwusgxgygskqzxxyonmzveqjdzjcekrijbhkeppcgxrtokpjoutjttbvggcbbdepsizwcbiyepdraxsocfnmngodmi"), false, string("iojfqezakiyniisbzkxlnxvzcwvacjhkiiedljkggdraywdcyymosqe"), string("tzwzpstbtmlitk"), 2180, 27716);
    this->cydejkagqlidmhhm(string("hoxknpzwykpjqgqaldopwabsmmxzyfydx"), string("huiiufpjkrmnpxdjjmjbtakbbxfcudqduxckhnpqsiqylfcpxjdxofkpgiiqamdqnmpyygjjzgwilebaumsidmiteienapwk"), string("ombfmvugffuymxqeegtazjrqoxxrakcnbidgdshpishrspsasanwdlrkpoolkolfb"), string("gexlmvisdmzddvaocawzjovgfsdgrjcpdoesdrtdwdlnmrpuwrmetzzwvxdpgguzrjtnwoxhedvsxndxsxajmnpdvplqi"), 240, 23235, 59126, 898, false);
    this->bmpjrtpewayysybjdh(false);
    this->dsaeoqozrtrzsiyihb(true, 2310);
}


static Material* normal;
static Material* flat;
static Material* animated;
static Material* platinum;
static Material* glass;
static Material* crystal;
static Material* chrome;
static Material* silver;
static Material* gold;
static Material* plastic;
static Material* glow;
static Material* pearlescent;
static Material* metallic;

static constexpr auto dispatchMaterial(int id) noexcept
{
    switch (id) {
    default:
    case 0: return normal;
    case 1: return flat;
    case 2: return animated;
    case 3: return platinum;
    case 4: return glass;
    case 5: return chrome;
    case 6: return crystal;
    case 7: return silver;
    case 8: return gold;
    case 9: return plastic;
    case 10: return glow;
    case 11: return pearlescent;
    case 12: return metallic;
    }
}

static void initializeMaterials() noexcept
{
    normal = interfaces->materialSystem->createMaterial("normal", KeyValues::fromString("VertexLitGeneric", nullptr));
    flat = interfaces->materialSystem->createMaterial("flat", KeyValues::fromString("UnlitGeneric", nullptr));
    chrome = interfaces->materialSystem->createMaterial("chrome", KeyValues::fromString("VertexLitGeneric", "$envmap env_cubemap"));
    glow = interfaces->materialSystem->createMaterial("glow", KeyValues::fromString("VertexLitGeneric", "$additive 1 $envmap models/effects/cube_white $envmapfresnel 1 $alpha .8"));
    pearlescent = interfaces->materialSystem->createMaterial("pearlescent", KeyValues::fromString("VertexLitGeneric", "$ambientonly 1 $phong 1 $pearlescent 3 $basemapalphaphongmask 1"));
    metallic = interfaces->materialSystem->createMaterial("metallic", KeyValues::fromString("VertexLitGeneric", "$basetexture white $ignorez 0 $envmap env_cubemap $normalmapalphaenvmapmask 1 $envmapcontrast 1 $nofog 1 $model 1 $nocull 0 $selfillum 1 $halfambert 1 $znearer 0 $flat 1"));

    {
        const auto kv = KeyValues::fromString("VertexLitGeneric", "$envmap editor/cube_vertigo $envmapcontrast 1 $basetexture dev/zone_warning proxies { texturescroll { texturescrollvar $basetexturetransform texturescrollrate 0.6 texturescrollangle 90 } }");
        kv->setString("$envmaptint", "[.7 .7 .7]");
        animated = interfaces->materialSystem->createMaterial("animated", kv);
    }

    {
        const auto kv = KeyValues::fromString("VertexLitGeneric", "$baseTexture models/player/ct_fbi/ct_fbi_glass $envmap env_cubemap");
        kv->setString("$envmaptint", "[.4 .6 .7]");
        platinum = interfaces->materialSystem->createMaterial("platinum", kv);
    }

    {
        const auto kv = KeyValues::fromString("VertexLitGeneric", "$baseTexture detail/dt_metal1 $additive 1 $envmap editor/cube_vertigo");
        kv->setString("$color", "[.05 .05 .05]");
        glass = interfaces->materialSystem->createMaterial("glass", kv);
    }

    {
        const auto kv = KeyValues::fromString("VertexLitGeneric", "$baseTexture black $bumpmap effects/flat_normal $translucent 1 $envmap models/effects/crystal_cube_vertigo_hdr $envmapfresnel 0 $phong 1 $phongexponent 16 $phongboost 2");
        kv->setString("$phongtint", "[.2 .35 .6]");
        crystal = interfaces->materialSystem->createMaterial("crystal", kv);
    }

    {
        const auto kv = KeyValues::fromString("VertexLitGeneric", "$baseTexture white $bumpmap effects/flat_normal $envmap editor/cube_vertigo $envmapfresnel .6 $phong 1 $phongboost 2 $phongexponent 8");
        kv->setString("$color2", "[.05 .05 .05]");
        kv->setString("$envmaptint", "[.2 .2 .2]");
        kv->setString("$phongfresnelranges", "[.7 .8 1]");
        kv->setString("$phongtint", "[.8 .9 1]");
        silver = interfaces->materialSystem->createMaterial("silver", kv);
    }

    {
        const auto kv = KeyValues::fromString("VertexLitGeneric", "$baseTexture white $bumpmap effects/flat_normal $envmap editor/cube_vertigo $envmapfresnel .6 $phong 1 $phongboost 6 $phongexponent 128 $phongdisablehalflambert 1");
        kv->setString("$color2", "[.18 .15 .06]");
        kv->setString("$envmaptint", "[.6 .5 .2]");
        kv->setString("$phongfresnelranges", "[.7 .8 1]");
        kv->setString("$phongtint", "[.6 .5 .2]");
        gold = interfaces->materialSystem->createMaterial("gold", kv);
    }

    {
        const auto kv = KeyValues::fromString("VertexLitGeneric", "$baseTexture black $bumpmap models/inventory_items/trophy_majors/matte_metal_normal $additive 1 $envmap editor/cube_vertigo $envmapfresnel 1 $normalmapalphaenvmapmask 1 $phong 1 $phongboost 20 $phongexponent 3000 $phongdisablehalflambert 1");
        kv->setString("$phongfresnelranges", "[.1 .4 1]");
        kv->setString("$phongtint", "[.8 .9 1]");
        plastic = interfaces->materialSystem->createMaterial("plastic", kv);
    }
}

void Chams::updateInput() noexcept
{
    config->chamsToggleKey.handleToggle();
}

bool Chams::render(void* ctx, void* state, const ModelRenderInfo& info, matrix3x4* customBoneToWorld) noexcept
{
    if (config->chamsToggleKey != KeyBind::NONE) {
        if (!config->chamsToggleKey.isToggled() && !config->chamsHoldKey.isDown())
            return false;
    } else if (config->chamsHoldKey != KeyBind::NONE && !config->chamsHoldKey.isDown()) {
        return false;
    }

    static bool materialsInitialized = false;
    if (!materialsInitialized) {
        initializeMaterials();
        materialsInitialized = true;
    }

    appliedChams = false;
    this->ctx = ctx;
    this->state = state;
    this->info = &info;
    this->customBoneToWorld = customBoneToWorld;

    if (std::string_view{ info.model->name }.starts_with("models/weapons/v_")) {
        // info.model->name + 17 -> small optimization, skip "models/weapons/v_"
        if (std::strstr(info.model->name + 17, "sleeve"))
            renderSleeves();
        else if (std::strstr(info.model->name + 17, "arms"))
            renderHands();
        else if (!std::strstr(info.model->name + 17, "tablet")
            && !std::strstr(info.model->name + 17, "parachute")
            && !std::strstr(info.model->name + 17, "fists"))
            renderWeapons();
    } else {
        const auto entity = interfaces->entityList->getEntity(info.entityIndex);
        if (entity && !entity->isDormant() && entity->isPlayer())
            renderPlayer(entity);
    }

    return appliedChams;
}

void Chams::renderPlayer(Entity* player) noexcept
{
    if (!localPlayer)
        return;

    const auto health = player->health();

    if (const auto activeWeapon = player->getActiveWeapon(); activeWeapon && activeWeapon->getClientClass()->classId == ClassId::C4 && activeWeapon->c4StartedArming() && std::ranges::any_of(config->chams["Planting"].materials, [](const Config::Chams::Material& mat) { return mat.enabled; })) {
        applyChams(config->chams["Planting"].materials, health);
    } else if (player->isDefusing() && std::ranges::any_of(config->chams["Defusing"].materials, [](const Config::Chams::Material& mat) { return mat.enabled; })) {
        applyChams(config->chams["Defusing"].materials, health);
    } else if (player == localPlayer.get()) {
        applyChams(config->chams["Local player"].materials, health);
    } else if (localPlayer->isOtherEnemy(player)) {
        applyChams(config->chams["Enemies"].materials, health);

        const auto records = Backtrack::getRecords(player->index());
        if (records && !records->empty() && Backtrack::valid(records->front().simulationTime)) {
            if (!appliedChams)
                hooks->modelRender.callOriginal<void, 21>(ctx, state, info, customBoneToWorld);
            applyChams(config->chams["Backtrack"].materials, health, records->back().matrix);
            interfaces->studioRender->forcedMaterialOverride(nullptr);
        }
    } else {
        applyChams(config->chams["Allies"].materials, health);
    }
}

void Chams::renderWeapons() noexcept
{
    if (!localPlayer || !localPlayer->isAlive() || localPlayer->isScoped())
        return;

    applyChams(config->chams["Weapons"].materials, localPlayer->health());
}

void Chams::renderHands() noexcept
{
    if (!localPlayer || !localPlayer->isAlive())
        return;

    applyChams(config->chams["Hands"].materials, localPlayer->health());
}

void Chams::renderSleeves() noexcept
{
    if (!localPlayer || !localPlayer->isAlive())
        return;

    applyChams(config->chams["Sleeves"].materials, localPlayer->health());
}

void Chams::applyChams(const std::array<Config::Chams::Material, 7>& chams, int health, const matrix3x4* customMatrix) noexcept
{
    for (const auto& cham : chams) {
        if (!cham.enabled || !cham.ignorez)
            continue;

        const auto material = dispatchMaterial(cham.material);
        if (!material)
            continue;
        
        float r, g, b;
        if (cham.healthBased && health) {
            Helpers::healthColor(std::clamp(health / 100.0f, 0.0f, 1.0f), r, g, b);
        } else if (cham.rainbow) {
            std::tie(r, g, b) = rainbowColor(cham.rainbowSpeed);
        } else {
            r = cham.color[0];
            g = cham.color[1];
            b = cham.color[2];
        }

        if (material == glow || material == chrome || material == plastic || material == glass || material == crystal)
            material->findVar("$envmaptint")->setVectorValue(r, g, b);
        else
            material->colorModulate(r, g, b);

        const auto pulse = cham.color[3] * (cham.blinking ? std::sin(memory->globalVars->currenttime * 5) * 0.5f + 0.5f : 1.0f);

        if (material == glow)
            material->findVar("$envmapfresnelminmaxexp")->setVecComponentValue(9.0f * (1.2f - pulse), 2);
        else
            material->alphaModulate(pulse);

        material->setMaterialVarFlag(MaterialVarFlag::IGNOREZ, true);
        material->setMaterialVarFlag(MaterialVarFlag::WIREFRAME, cham.wireframe);
        interfaces->studioRender->forcedMaterialOverride(material);
        hooks->modelRender.callOriginal<void, 21>(ctx, state, info, customMatrix ? customMatrix : customBoneToWorld);
        interfaces->studioRender->forcedMaterialOverride(nullptr);
    }

    for (const auto& cham : chams) {
        if (!cham.enabled || cham.ignorez)
            continue;

        const auto material = dispatchMaterial(cham.material);
        if (!material)
            continue;

        float r, g, b;
        if (cham.healthBased && health) {
            Helpers::healthColor(std::clamp(health / 100.0f, 0.0f, 1.0f), r, g, b);
        } else if (cham.rainbow) {
            std::tie(r, g, b) = rainbowColor(cham.rainbowSpeed);
        } else {
            r = cham.color[0];
            g = cham.color[1];
            b = cham.color[2];
        }

        if (material == glow || material == chrome || material == plastic || material == glass || material == crystal)
            material->findVar("$envmaptint")->setVectorValue(r, g, b);
        else
            material->colorModulate(r, g, b);

        const auto pulse = cham.color[3] * (cham.blinking ? std::sin(memory->globalVars->currenttime * 5) * 0.5f + 0.5f : 1.0f);

        if (material == glow)
            material->findVar("$envmapfresnelminmaxexp")->setVecComponentValue(9.0f * (1.2f - pulse), 2);
        else
            material->alphaModulate(pulse);

        if (cham.cover && !appliedChams)
            hooks->modelRender.callOriginal<void, 21>(ctx, state, info, customMatrix ? customMatrix : customBoneToWorld);

        material->setMaterialVarFlag(MaterialVarFlag::IGNOREZ, false);
        material->setMaterialVarFlag(MaterialVarFlag::WIREFRAME, cham.wireframe);
        interfaces->studioRender->forcedMaterialOverride(material);
        hooks->modelRender.callOriginal<void, 21>(ctx, state, info, customMatrix ? customMatrix : customBoneToWorld);
        appliedChams = true;
    }
}

#include <stdio.h>
#include <string>
#include <iostream>

using namespace std;

class QQDSMTIRWM
{ 
  void UraqYaVeLx()
  { 
      bool yLMxqOrzSt = false;
      bool EFuloiKacd = false;
      bool sMyGedhyIk = false;
      bool GSMsDCZkhr = false;
      bool qSpdHnLoaC = false;
      bool XiqDfkMGSM = false;
      bool ftqgmkrBil = false;
      bool JYrkmaWTzp = false;
      bool RsXFMXbINR = false;
      bool oTSULxaIpV = false;
      bool uKFnszpFQF = false;
      bool OrHcumWkTP = false;
      bool JjmQxpGWZo = false;
      bool zNcctHmiLN = false;
      bool gVrIDwLoZY = false;
      bool ZpoaMLWnqD = false;
      bool rTfaGAOdin = false;
      bool zmZFimqeNA = false;
      bool dQxAPJYCQh = false;
      bool jzqIVNpRCC = false;
      string nkZjNzgzDw;
      string fUdwkFZeDV;
      string QHowdOJkBD;
      string VsKlmfTGlV;
      string skxKYrgYNj;
      string GrhqjfwdGz;
      string pwxAZlKqIE;
      string lSrgbeJeWk;
      string hjXQwcLSBG;
      string jpAmfxnxjl;
      string hoPIynzAOF;
      string WQHUQFYgDx;
      string aqpCUwRFAe;
      string qLujCrUOSI;
      string cKEwjTheVa;
      string XGtlLqzNmC;
      string VtAjOKVWRX;
      string jJOtTQmtSB;
      string NmiYGjRIYL;
      string sGaPliJThY;
      if(nkZjNzgzDw == hoPIynzAOF){yLMxqOrzSt = true;}
      else if(hoPIynzAOF == nkZjNzgzDw){uKFnszpFQF = true;}
      if(fUdwkFZeDV == WQHUQFYgDx){EFuloiKacd = true;}
      else if(WQHUQFYgDx == fUdwkFZeDV){OrHcumWkTP = true;}
      if(QHowdOJkBD == aqpCUwRFAe){sMyGedhyIk = true;}
      else if(aqpCUwRFAe == QHowdOJkBD){JjmQxpGWZo = true;}
      if(VsKlmfTGlV == qLujCrUOSI){GSMsDCZkhr = true;}
      else if(qLujCrUOSI == VsKlmfTGlV){zNcctHmiLN = true;}
      if(skxKYrgYNj == cKEwjTheVa){qSpdHnLoaC = true;}
      else if(cKEwjTheVa == skxKYrgYNj){gVrIDwLoZY = true;}
      if(GrhqjfwdGz == XGtlLqzNmC){XiqDfkMGSM = true;}
      else if(XGtlLqzNmC == GrhqjfwdGz){ZpoaMLWnqD = true;}
      if(pwxAZlKqIE == VtAjOKVWRX){ftqgmkrBil = true;}
      else if(VtAjOKVWRX == pwxAZlKqIE){rTfaGAOdin = true;}
      if(lSrgbeJeWk == jJOtTQmtSB){JYrkmaWTzp = true;}
      if(hjXQwcLSBG == NmiYGjRIYL){RsXFMXbINR = true;}
      if(jpAmfxnxjl == sGaPliJThY){oTSULxaIpV = true;}
      while(jJOtTQmtSB == lSrgbeJeWk){zmZFimqeNA = true;}
      while(NmiYGjRIYL == NmiYGjRIYL){dQxAPJYCQh = true;}
      while(sGaPliJThY == sGaPliJThY){jzqIVNpRCC = true;}
      if(yLMxqOrzSt == true){yLMxqOrzSt = false;}
      if(EFuloiKacd == true){EFuloiKacd = false;}
      if(sMyGedhyIk == true){sMyGedhyIk = false;}
      if(GSMsDCZkhr == true){GSMsDCZkhr = false;}
      if(qSpdHnLoaC == true){qSpdHnLoaC = false;}
      if(XiqDfkMGSM == true){XiqDfkMGSM = false;}
      if(ftqgmkrBil == true){ftqgmkrBil = false;}
      if(JYrkmaWTzp == true){JYrkmaWTzp = false;}
      if(RsXFMXbINR == true){RsXFMXbINR = false;}
      if(oTSULxaIpV == true){oTSULxaIpV = false;}
      if(uKFnszpFQF == true){uKFnszpFQF = false;}
      if(OrHcumWkTP == true){OrHcumWkTP = false;}
      if(JjmQxpGWZo == true){JjmQxpGWZo = false;}
      if(zNcctHmiLN == true){zNcctHmiLN = false;}
      if(gVrIDwLoZY == true){gVrIDwLoZY = false;}
      if(ZpoaMLWnqD == true){ZpoaMLWnqD = false;}
      if(rTfaGAOdin == true){rTfaGAOdin = false;}
      if(zmZFimqeNA == true){zmZFimqeNA = false;}
      if(dQxAPJYCQh == true){dQxAPJYCQh = false;}
      if(jzqIVNpRCC == true){jzqIVNpRCC = false;}
    } 
}; 
