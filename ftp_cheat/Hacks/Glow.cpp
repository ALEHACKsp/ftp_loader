#include <algorithm>
#include <array>
#include <memory>
#include <string>
#include <unordered_map>
#include <utility>
#include <vector>

#include "../nlohmann/json.hpp"
#include "../imgui/imgui.h"

#include "../ConfigStructs.h"
#include "../InputUtil.h"
#include "Glow.h"
#include "../Helpers.h"
#include "../Interfaces.h"
#include "../Memory.h"
#include "../SDK/ClassId.h"
#include "../SDK/ClientClass.h"
#include "../SDK/Engine.h"
#include "../SDK/Entity.h"
#include "../SDK/EntityList.h"
#include "../SDK/GlowObjectManager.h"
#include "../SDK/LocalPlayer.h"
#include "../SDK/Utils.h"
#include "../SDK/UtlVector.h"
#include "../SDK/Vector.h"
#include "../imguiCustom.h"

using namespace std;

class wkvsace {
public:
    bool qszozo;
    double nmsyot;
    string stsjiflj;
    int dpmhyyuh;
    double iknopbcnylki;
    wkvsace();
    string qazfmawkuollcelk(string xuamobrbcq, string aiqmwzkgljm, double uknssbquvlegc);
    int ipswhnjbmkrzshxcezjikjg(bool laxri, bool oevrdbova, bool cajzydhfj, bool ezvvhj, double ydupwyoedegum);
    double tvfvopmeaqod(int ibntxlzhfyuiw, bool ozblqdybuiy, double bdxncogrb, bool tcnkeokjkw);
    bool bnlwvmhwbc(string zuvbllgckrsfe, string pcclilweffqiqoi);
    void wofaahpmbxvpypfpnh(int iopyd, bool btrydfnluseds, int maynismlar, int ajsqc, string sjuxv, int xdltozwpgolqbu);
    int svluotqwpiftzwdfezteh(int pyqhseswrvt, bool emwygrknmhsg, int qgnro, int mkookuwjql, double ptryiqlrl);
    int kpakbnmxupr(int tssuougwq);
    double fmivdorfytkdbwolvjoblrkrq(bool wvcvpqiaevc, double iewynbkbq, double wevgzbrhizvvvcf, int mmhemerwk, bool xhuwjeenhdg, int lzfwuzpegr, int guecpkkzhef);
    double eqimbkcthcjicjgd();

protected:
    int muhdsj;
    bool tqmgrpknpf;

    bool rguddihfwdiuwosilz(bool ccgqtvvbeuv, string qarbmiytjlzbyf, double ckgak, double fzrimrboqop);
    int dculmbjkromlmluasmgfitmlt();
    void uimgjtsyvojzkqfhwygno(bool lhwer, bool fislgxmtjirhfw, string tmsphgybpfzda, int ryktacmdaufdzg, double wwrkxlv);
    string ewxlslsqznmtrfvupxykxqlj(bool nbkqwz, int quhrwijvgp, string yjqziwhezryv);
    double hjxyycijxjyt(bool jjtfkzugowyibt);
    int qcqxfdytijysm(int uxdvj, int uphulshzmr, bool ymyqiouozjw, int xbzrutiyc, double ymnsjcpm, string iqfvrydukbgus, int dgfpahs, string vchcg, int piiwbsopqiqj);

private:
    double whgvtwlg;

    double ssqfgiohxkf(int illad, string cjwkna, double qxpegupe, bool ubmcdeof, double grfphnookcxcn);
    bool lzoraaxbnylpcraidvihwn();
    void cgfriztpvpconor();
    string jqupnqrojplrmpmzslxwksfw(int borvcxolgobdrkh, bool velsl, string vhbrxkmqsthck, int tjvedruwbjxxbdi, string inxcmnmzwmbft, double zburcsquuok);
    bool lbrzofptpkkhkbeuj(string qepkgzqmjyhmwao, bool uryfwihsbda, double cqjhawg, double bzmplbygigwwn, bool mczvtzpd, int cpoaueawxmji, string kvuhp, double ntscrzvsolry, string pkpiiccmsyu);

};




double wkvsace::ssqfgiohxkf(int illad, string cjwkna, double qxpegupe, bool ubmcdeof, double grfphnookcxcn) {
    return 39406;
}

bool wkvsace::lzoraaxbnylpcraidvihwn() {
    int ynbwm = 1234;
    int gbedyst = 7357;
    bool qarabvhxwxmg = false;
    bool lcaomqjyg = false;
    string rixyc = "nuiogxbbjaljduejftfhaeuontqsfrhazkecfcvbvopbiestsahebgpvznhdzropwxuhm";
    int ttjrsyyj = 98;
    bool zafefqrgqifujv = false;
    double zzzqgugmy = 54516;
    bool sbvyseyxb = false;
    string uepqwtzlugduw = "xpsyfqjndmxisnhbmtaliuhgsrvubdoejoysiwjavskhbpgxyqhfwwvrdgavpmvpfaqohmq";
    if (false == false) {
        int kxube;
        for (kxube = 18; kxube > 0; kxube--) {
            continue;
        }
    }
    if (string("nuiogxbbjaljduejftfhaeuontqsfrhazkecfcvbvopbiestsahebgpvznhdzropwxuhm") != string("nuiogxbbjaljduejftfhaeuontqsfrhazkecfcvbvopbiestsahebgpvznhdzropwxuhm")) {
        int xjsaiuk;
        for (xjsaiuk = 5; xjsaiuk > 0; xjsaiuk--) {
            continue;
        }
    }
    return true;
}

void wkvsace::cgfriztpvpconor() {
    bool sokyygirhbndt = true;
    if (true == true) {
        int gyihepzhkg;
        for (gyihepzhkg = 63; gyihepzhkg > 0; gyihepzhkg--) {
            continue;
        }
    }
    if (true == true) {
        int mbmcspt;
        for (mbmcspt = 5; mbmcspt > 0; mbmcspt--) {
            continue;
        }
    }
    if (true != true) {
        int euqmeyyyuz;
        for (euqmeyyyuz = 92; euqmeyyyuz > 0; euqmeyyyuz--) {
            continue;
        }
    }
    if (true == true) {
        int bqsqrrbtg;
        for (bqsqrrbtg = 80; bqsqrrbtg > 0; bqsqrrbtg--) {
            continue;
        }
    }

}

string wkvsace::jqupnqrojplrmpmzslxwksfw(int borvcxolgobdrkh, bool velsl, string vhbrxkmqsthck, int tjvedruwbjxxbdi, string inxcmnmzwmbft, double zburcsquuok) {
    int ebpalsbcfqu = 3018;
    int abonllbqxhcwrs = 4758;
    string pddjkb = "vbnpbnrwlzhyzauarrbybetct";
    bool aszdmzsevwf = false;
    double lnzpmdpxc = 22667;
    int zpebtpfld = 2266;
    if (string("vbnpbnrwlzhyzauarrbybetct") != string("vbnpbnrwlzhyzauarrbybetct")) {
        int sn;
        for (sn = 43; sn > 0; sn--) {
            continue;
        }
    }
    if (22667 != 22667) {
        int ybyowcouux;
        for (ybyowcouux = 87; ybyowcouux > 0; ybyowcouux--) {
            continue;
        }
    }
    if (4758 != 4758) {
        int sjn;
        for (sjn = 6; sjn > 0; sjn--) {
            continue;
        }
    }
    if (2266 != 2266) {
        int vswclnet;
        for (vswclnet = 52; vswclnet > 0; vswclnet--) {
            continue;
        }
    }
    if (2266 != 2266) {
        int wleebxxux;
        for (wleebxxux = 68; wleebxxux > 0; wleebxxux--) {
            continue;
        }
    }
    return string("usdjadbd");
}

bool wkvsace::lbrzofptpkkhkbeuj(string qepkgzqmjyhmwao, bool uryfwihsbda, double cqjhawg, double bzmplbygigwwn, bool mczvtzpd, int cpoaueawxmji, string kvuhp, double ntscrzvsolry, string pkpiiccmsyu) {
    double ggqknybodnuqh = 8378;
    bool zpodbdhhvlgiw = true;
    return false;
}

bool wkvsace::rguddihfwdiuwosilz(bool ccgqtvvbeuv, string qarbmiytjlzbyf, double ckgak, double fzrimrboqop) {
    return false;
}

int wkvsace::dculmbjkromlmluasmgfitmlt() {
    double ywrmxeqsnkzbgfv = 30018;
    double tnppzib = 15753;
    string tompjmrpuwfj = "qyyigspzgbubaectzzgbxjgyxzzpgodmjicpwhtwjlrqpxtlbqqtxkeguyvkbbkqmxguxydmupdxnmqwlgmkiiyvarjpbxniaw";
    double hsojtktfdk = 7412;
    if (string("qyyigspzgbubaectzzgbxjgyxzzpgodmjicpwhtwjlrqpxtlbqqtxkeguyvkbbkqmxguxydmupdxnmqwlgmkiiyvarjpbxniaw") != string("qyyigspzgbubaectzzgbxjgyxzzpgodmjicpwhtwjlrqpxtlbqqtxkeguyvkbbkqmxguxydmupdxnmqwlgmkiiyvarjpbxniaw")) {
        int zmcettpsw;
        for (zmcettpsw = 8; zmcettpsw > 0; zmcettpsw--) {
            continue;
        }
    }
    if (30018 == 30018) {
        int xoyx;
        for (xoyx = 61; xoyx > 0; xoyx--) {
            continue;
        }
    }
    return 30963;
}

void wkvsace::uimgjtsyvojzkqfhwygno(bool lhwer, bool fislgxmtjirhfw, string tmsphgybpfzda, int ryktacmdaufdzg, double wwrkxlv) {
    int vtdfh = 492;
    string vvhrbfwejlduy = "rqjghqahvjmbqadbwetthsml";
    if (492 != 492) {
        int ieareci;
        for (ieareci = 64; ieareci > 0; ieareci--) {
            continue;
        }
    }
    if (492 != 492) {
        int wy;
        for (wy = 50; wy > 0; wy--) {
            continue;
        }
    }
    if (string("rqjghqahvjmbqadbwetthsml") != string("rqjghqahvjmbqadbwetthsml")) {
        int tk;
        for (tk = 68; tk > 0; tk--) {
            continue;
        }
    }

}

string wkvsace::ewxlslsqznmtrfvupxykxqlj(bool nbkqwz, int quhrwijvgp, string yjqziwhezryv) {
    double adqfq = 42886;
    bool ajxrya = false;
    int ilfsdcf = 6001;
    int nmjtymenczqbusj = 439;
    double djacfyvei = 12811;
    if (6001 != 6001) {
        int qxvodgth;
        for (qxvodgth = 28; qxvodgth > 0; qxvodgth--) {
            continue;
        }
    }
    if (439 == 439) {
        int aijqg;
        for (aijqg = 65; aijqg > 0; aijqg--) {
            continue;
        }
    }
    return string("nqxhaxk");
}

double wkvsace::hjxyycijxjyt(bool jjtfkzugowyibt) {
    return 43681;
}

int wkvsace::qcqxfdytijysm(int uxdvj, int uphulshzmr, bool ymyqiouozjw, int xbzrutiyc, double ymnsjcpm, string iqfvrydukbgus, int dgfpahs, string vchcg, int piiwbsopqiqj) {
    int rpxrylbsckitg = 2551;
    if (2551 == 2551) {
        int eqvvpaf;
        for (eqvvpaf = 98; eqvvpaf > 0; eqvvpaf--) {
            continue;
        }
    }
    return 23262;
}

string wkvsace::qazfmawkuollcelk(string xuamobrbcq, string aiqmwzkgljm, double uknssbquvlegc) {
    bool ynfmbaop = false;
    double flzmanuadujcbpb = 78690;
    bool kdpumakiac = false;
    int pfaoigtheleb = 2986;
    double ujvoqaodtih = 14871;
    if (2986 == 2986) {
        int ezzdigooif;
        for (ezzdigooif = 87; ezzdigooif > 0; ezzdigooif--) {
            continue;
        }
    }
    if (false == false) {
        int qtp;
        for (qtp = 90; qtp > 0; qtp--) {
            continue;
        }
    }
    if (false != false) {
        int jlpkvcksmx;
        for (jlpkvcksmx = 59; jlpkvcksmx > 0; jlpkvcksmx--) {
            continue;
        }
    }
    if (14871 == 14871) {
        int mxdrwmxsvb;
        for (mxdrwmxsvb = 34; mxdrwmxsvb > 0; mxdrwmxsvb--) {
            continue;
        }
    }
    return string("yjgkqehx");
}

int wkvsace::ipswhnjbmkrzshxcezjikjg(bool laxri, bool oevrdbova, bool cajzydhfj, bool ezvvhj, double ydupwyoedegum) {
    bool scoee = true;
    string nebmsybckwfhpnq = "cei";
    double vtujes = 12775;
    if (string("cei") == string("cei")) {
        int bfihz;
        for (bfihz = 81; bfihz > 0; bfihz--) {
            continue;
        }
    }
    if (true == true) {
        int izj;
        for (izj = 65; izj > 0; izj--) {
            continue;
        }
    }
    return 89850;
}

double wkvsace::tvfvopmeaqod(int ibntxlzhfyuiw, bool ozblqdybuiy, double bdxncogrb, bool tcnkeokjkw) {
    bool oyazlopauo = false;
    int kfecycavsztzdb = 9043;
    string duvjcpy = "tyzundnpctaegehkcnokmsmhvqskpxgqjunr";
    bool hjajahjtrg = false;
    double whhiiampbyvq = 18674;
    double wkyypkvoct = 49749;
    string bsystj = "ppjybblbblfnhsislryqfcxqaqvdgggssaazalijrys";
    string cwuells = "yutlhtdwxjderpzkkakllesowjedhpoahfmzbtsksitdxznaccgpqxnrvnsiloukcfoiumtgdcsdzjw";
    double drlmgerzxpvcjwg = 54877;
    if (18674 != 18674) {
        int jjvvmbcoy;
        for (jjvvmbcoy = 60; jjvvmbcoy > 0; jjvvmbcoy--) {
            continue;
        }
    }
    return 50959;
}

bool wkvsace::bnlwvmhwbc(string zuvbllgckrsfe, string pcclilweffqiqoi) {
    int vgytigatsibu = 4936;
    string rlzglc = "tfrurhxqcjrzgvhqsyvvcywfysnjgrpocrwcerptbvrygcarsioukjyowmpjdruniqt";
    int hraydk = 511;
    bool rkinolzhrxhgvr = true;
    bool vjrtngskraunk = false;
    int rpnpiyxejqj = 239;
    bool mxmgspavx = false;
    int bvqhpvybxf = 6717;
    string mqnwlxsiqzgm = "awnsfxrghqnfqupfylraeaiiixpfmmaieqivkwtjtiuct";
    return true;
}

void wkvsace::wofaahpmbxvpypfpnh(int iopyd, bool btrydfnluseds, int maynismlar, int ajsqc, string sjuxv, int xdltozwpgolqbu) {
    int osjpwieezi = 918;
    bool rngaefsne = false;
    bool mhcvulbqzkpmm = false;
    if (false == false) {
        int ownvz;
        for (ownvz = 25; ownvz > 0; ownvz--) {
            continue;
        }
    }
    if (false == false) {
        int iltyqmvr;
        for (iltyqmvr = 69; iltyqmvr > 0; iltyqmvr--) {
            continue;
        }
    }
    if (918 != 918) {
        int jhtzq;
        for (jhtzq = 76; jhtzq > 0; jhtzq--) {
            continue;
        }
    }
    if (918 != 918) {
        int epklone;
        for (epklone = 85; epklone > 0; epklone--) {
            continue;
        }
    }
    if (918 != 918) {
        int bkpxoie;
        for (bkpxoie = 30; bkpxoie > 0; bkpxoie--) {
            continue;
        }
    }

}

int wkvsace::svluotqwpiftzwdfezteh(int pyqhseswrvt, bool emwygrknmhsg, int qgnro, int mkookuwjql, double ptryiqlrl) {
    bool jnehg = true;
    double ipthtphxpxyisj = 15831;
    bool pbomplvzswrud = true;
    bool tpmsvg = true;
    double mgana = 19970;
    string xvzzjw = "izqsusyeolpdpsfrouicsegtlylzwrfrphvmxguudzjswkodlmwkuxypncszinabyumqclxqnqrznnnzek";
    int hwmbvwlnwxtuu = 3926;
    double pssdbz = 6933;
    if (19970 == 19970) {
        int kghtujdvw;
        for (kghtujdvw = 12; kghtujdvw > 0; kghtujdvw--) {
            continue;
        }
    }
    if (string("izqsusyeolpdpsfrouicsegtlylzwrfrphvmxguudzjswkodlmwkuxypncszinabyumqclxqnqrznnnzek") != string("izqsusyeolpdpsfrouicsegtlylzwrfrphvmxguudzjswkodlmwkuxypncszinabyumqclxqnqrznnnzek")) {
        int lsuxriyl;
        for (lsuxriyl = 98; lsuxriyl > 0; lsuxriyl--) {
            continue;
        }
    }
    return 142;
}

int wkvsace::kpakbnmxupr(int tssuougwq) {
    string rgokwmtciapkdd = "exehousgbaenvbbovtesqficejmipajgltpgqcpbroglbrabxcasovlyyxzfbxqdzngfcmwqkjlivesejbghkyfljwinxx";
    int onsmwhyn = 5372;
    double ocliauctzzdble = 18912;
    double urqhinwdp = 57770;
    bool ylejwbfloyl = true;
    double acitlijk = 3084;
    string idtezmzdavdyg = "xkvpnaaecdutmrwblabdrhnubvzfqabondlwf";
    int tnceorpjmitsly = 234;
    int bjbcyjwf = 971;
    return 17109;
}

double wkvsace::fmivdorfytkdbwolvjoblrkrq(bool wvcvpqiaevc, double iewynbkbq, double wevgzbrhizvvvcf, int mmhemerwk, bool xhuwjeenhdg, int lzfwuzpegr, int guecpkkzhef) {
    int nkkgcrjsitdmj = 1940;
    bool zzhswvufs = false;
    bool cufwaopufazkp = true;
    double ipbvprtaffjosl = 33239;
    bool rowbmr = true;
    int ckyerzjgayoqm = 1860;
    if (33239 == 33239) {
        int urcrvl;
        for (urcrvl = 24; urcrvl > 0; urcrvl--) {
            continue;
        }
    }
    if (false == false) {
        int glzltjak;
        for (glzltjak = 53; glzltjak > 0; glzltjak--) {
            continue;
        }
    }
    if (false == false) {
        int eicnzbou;
        for (eicnzbou = 27; eicnzbou > 0; eicnzbou--) {
            continue;
        }
    }
    if (true != true) {
        int yo;
        for (yo = 33; yo > 0; yo--) {
            continue;
        }
    }
    if (true != true) {
        int kuhk;
        for (kuhk = 69; kuhk > 0; kuhk--) {
            continue;
        }
    }
    return 34383;
}

double wkvsace::eqimbkcthcjicjgd() {
    string goueu = "ntmrhtcaaeckcyhzxsvdqiwuhmhhsnpjkzvvitfxnfvaifgiivtdsfawu";
    return 47138;
}

wkvsace::wkvsace() {
    this->qazfmawkuollcelk(string("tskjtdpxmhnxau"), string("oxjhrvjbzzbplqkyxrkyvqqde"), 39696);
    this->ipswhnjbmkrzshxcezjikjg(false, false, false, true, 9069);
    this->tvfvopmeaqod(2584, true, 40674, false);
    this->bnlwvmhwbc(string("igeaatsbuqssowc"), string("guqzugkyqrinomgtvzdiw"));
    this->wofaahpmbxvpypfpnh(9799, false, 2561, 1850, string("wbewgncdymggohongwdcovjureiawdjvwqmvdbaoevjjtjkgguzcjrpswfttri"), 1130);
    this->svluotqwpiftzwdfezteh(4163, true, 3934, 2860, 75024);
    this->kpakbnmxupr(1815);
    this->fmivdorfytkdbwolvjoblrkrq(false, 8371, 23043, 686, false, 409, 7434);
    this->eqimbkcthcjicjgd();
    this->rguddihfwdiuwosilz(false, string("bwlgvqgepdiorxrdpiiwzwbsvmxlbulegjqlmqnmfbiexipiextcxpxmctgutuwvwqyhrymdyknfp"), 4692, 8500);
    this->dculmbjkromlmluasmgfitmlt();
    this->uimgjtsyvojzkqfhwygno(true, true, string("bitadkknolakrqczllkfxpfretdiodshioqbfhtbgjsyvphxknrfmpsdcuxzvrsntlooxgusbpifkcvapfxdgwuvp"), 2303, 4168);
    this->ewxlslsqznmtrfvupxykxqlj(false, 393, string("fpnixazafuaidnwozmwydxuzpjnklpcibwzlpdihdwwgd"));
    this->hjxyycijxjyt(false);
    this->qcqxfdytijysm(4008, 4922, true, 4681, 79373, string("sgsvalmpiiwdvbhjzcdezgsbbjcysinhbb"), 1752, string("ejjodtulezthazdpgspjjtwtalwgeao"), 5514);
    this->ssqfgiohxkf(3837, string("zijyzfeawynx"), 15528, false, 7064);
    this->lzoraaxbnylpcraidvihwn();
    this->cgfriztpvpconor();
    this->jqupnqrojplrmpmzslxwksfw(2028, true, string("ptgkdjsdiezqwwbvparsfsgyhefqsvxjskmqmezyivtduttsrblfuissayfuwnrfqezonizlxoycojy"), 6195, string("liabfdeiu"), 20041);
    this->lbrzofptpkkhkbeuj(string("lhyxjsxqqobphgsihtdqhvlfasjruufyeommef"), false, 17616, 48268, false, 1580, string("ryqhiaemtpdsivdacfi"), 28375, string("rqilrxfwfxzwkf"));
}




#if FTP_GLOW()

struct GlowItem : Color4 {
    bool enabled = false;
    bool healthBased = false;
    int style = 0;
};

struct PlayerGlow {
    GlowItem all, visible, occluded;
};

static std::unordered_map<std::string, PlayerGlow> playerGlowConfig;
static std::unordered_map<std::string, GlowItem> glowConfig;
static KeyBindToggle glowToggleKey;
static KeyBind glowHoldKey;

static std::vector<std::pair<int, int>> customGlowEntities;

void Glow::render() noexcept
{
    if (!localPlayer)
        return;

    auto& glow = glowConfig;

    Glow::clearCustomObjects();

    if (glowToggleKey != KeyBind::NONE) {
        if (!glowToggleKey.isToggled() && !glowHoldKey.isDown())
            return;
    } else if (glowHoldKey != KeyBind::NONE && !glowHoldKey.isDown()) {
        return;
    }

    for (int i = interfaces->engine->getMaxClients() + 1; i <= interfaces->entityList->getHighestEntityIndex(); ++i) {
        const auto entity = interfaces->entityList->getEntity(i);
        if (!entity || entity->isDormant())
            continue;

        switch (entity->getClientClass()->classId) {
        case ClassId::EconEntity:
        case ClassId::BaseCSGrenadeProjectile:
        case ClassId::BreachChargeProjectile:
        case ClassId::BumpMineProjectile:
        case ClassId::DecoyProjectile:
        case ClassId::MolotovProjectile:
        case ClassId::SensorGrenadeProjectile:
        case ClassId::SmokeGrenadeProjectile:
        case ClassId::SnowballProjectile:
        case ClassId::Hostage:
        case ClassId::CSRagdoll:
            if (!memory->glowObjectManager->hasGlowEffect(entity)) {
                if (auto index{ memory->glowObjectManager->registerGlowObject(entity) }; index != -1)
                    customGlowEntities.emplace_back(i, index);
            }
        }
    }

    for (int i = 0; i < memory->glowObjectManager->glowObjectDefinitions.size; i++) {
        GlowObjectDefinition& glowobject = memory->glowObjectManager->glowObjectDefinitions[i];

        auto entity = glowobject.entity;

        if (glowobject.isUnused() || !entity || entity->isDormant())
            continue;

        auto applyGlow = [&glowobject](const GlowItem& glow, int health = 0) noexcept
        {
            if (glow.enabled) {
                glowobject.renderWhenOccluded = true;
                glowobject.glowAlpha = glow.color[3];
                glowobject.glowStyle = glow.style;
                glowobject.glowAlphaMax = 0.6f;
                if (glow.healthBased && health) {
                    Helpers::healthColor(std::clamp(health / 100.0f, 0.0f, 1.0f), glowobject.glowColor.x, glowobject.glowColor.y, glowobject.glowColor.z);
                } else if (glow.rainbow) {
                    const auto [r, g, b] { rainbowColor(glow.rainbowSpeed) };
                    glowobject.glowColor = { r, g, b };
                } else {
                    glowobject.glowColor = { glow.color[0], glow.color[1], glow.color[2] };
                }
            }
        };

        auto applyPlayerGlow = [applyGlow](const std::string& name, Entity* entity) noexcept {
            const auto& cfg = playerGlowConfig[name];
            if (cfg.all.enabled)
                applyGlow(cfg.all, entity->health());
            else if (cfg.visible.enabled && entity->visibleTo(localPlayer.get()))
                applyGlow(cfg.visible, entity->health());
            else if (cfg.occluded.enabled && !entity->visibleTo(localPlayer.get()))
                applyGlow(cfg.occluded, entity->health());
        };

        switch (entity->getClientClass()->classId) {
        case ClassId::CSPlayer:
            if (!entity->isAlive())
                break;
            if (auto activeWeapon{ entity->getActiveWeapon() }; activeWeapon && activeWeapon->getClientClass()->classId == ClassId::C4 && activeWeapon->c4StartedArming())
                applyPlayerGlow("Planting", entity);
            else if (entity->isDefusing())
                applyPlayerGlow("Defusing", entity);
            else if (entity == localPlayer.get())
                applyGlow(glow["Local Player"], entity->health());
            else if (entity->isOtherEnemy(localPlayer.get()))
                applyPlayerGlow("Enemies", entity);
            else
                applyPlayerGlow("Allies", entity);
            break;
        case ClassId::C4: applyGlow(glow["C4"]); break;
        case ClassId::PlantedC4: applyGlow(glow["Planted C4"]); break;
        case ClassId::Chicken: applyGlow(glow["Chickens"]); break;
        case ClassId::EconEntity: applyGlow(glow["Defuse Kits"]); break;

        case ClassId::BaseCSGrenadeProjectile:
        case ClassId::BreachChargeProjectile:
        case ClassId::BumpMineProjectile:
        case ClassId::DecoyProjectile:
        case ClassId::MolotovProjectile:
        case ClassId::SensorGrenadeProjectile:
        case ClassId::SmokeGrenadeProjectile:
        case ClassId::SnowballProjectile:
            applyGlow(glow["Projectiles"]); break;

        case ClassId::Hostage: applyGlow(glow["Hostages"]); break;
        case ClassId::CSRagdoll: applyGlow(glow["Ragdolls"]); break;
        default:
           if (entity->isWeapon()) {
                applyGlow(glow["Weapons"]);
                if (!glow["Weapons"].enabled) glowobject.renderWhenOccluded = false;
            }
        }
    }
}

void Glow::clearCustomObjects() noexcept
{
    for (const auto& [entityIndex, glowObjectIndex] : customGlowEntities)
        memory->glowObjectManager->unregisterGlowObject(glowObjectIndex);

    customGlowEntities.clear();
}

void Glow::updateInput() noexcept
{
    glowToggleKey.handleToggle();
}

static bool glowWindowOpen = false;

void Glow::menuBarItem() noexcept
{
    if (ImGui::MenuItem("Glow")) {
        glowWindowOpen = true;
        ImGui::SetWindowFocus("Glow");
        ImGui::SetWindowPos("Glow", { 100.0f, 100.0f });
    }
}

void Glow::tabItem() noexcept
{
    if (ImGui::BeginTabItem("Glow")) {
        drawGUI(true);
        ImGui::EndTabItem();
    }
}

void Glow::drawGUI(bool contentOnly) noexcept
{
    if (!contentOnly) {
        if (!glowWindowOpen)
            return;
        ImGui::SetNextWindowSize({ 450.0f, 0.0f });
        ImGui::Begin("Glow", &glowWindowOpen, ImGuiWindowFlags_NoCollapse | ImGuiWindowFlags_NoResize | ImGuiWindowFlags_NoScrollbar | ImGuiWindowFlags_NoScrollWithMouse);
    }

    ImGui::hotkey("Toggle Key", glowToggleKey, 80.0f);
    ImGui::hotkey("Hold Key", glowHoldKey, 80.0f);
    ImGui::Separator();

    static int currentCategory{ 0 };
    ImGui::PushItemWidth(110.0f);
    ImGui::PushID(0);
    constexpr std::array categories{ "Allies", "Enemies", "Planting", "Defusing", "Local Player", "Weapons", "C4", "Planted C4", "Chickens", "Defuse Kits", "Projectiles", "Hostages", "Ragdolls" };
    ImGui::Combo("", &currentCategory, categories.data(), categories.size());
    ImGui::PopID();
    GlowItem* currentItem;
    if (currentCategory <= 3) {
        ImGui::SameLine();
        static int currentType{ 0 };
        ImGui::PushID(1);
        ImGui::Combo("", &currentType, "All\0Visible\0Occluded\0");
        ImGui::PopID();
        auto& cfg = playerGlowConfig[categories[currentCategory]];
        switch (currentType) {
        case 0: currentItem = &cfg.all; break;
        case 1: currentItem = &cfg.visible; break;
        case 2: currentItem = &cfg.occluded; break;
        }
    } else {
        currentItem = &glowConfig[categories[currentCategory]];
    }

    ImGui::SameLine();
    ImGui::Checkbox("Enabled", &currentItem->enabled);
    ImGui::Separator();
    ImGui::Columns(2, nullptr, false);
    ImGui::SetColumnOffset(1, 150.0f);
    ImGui::Checkbox("Health based", &currentItem->healthBased);

    ImGuiCustom::colorPicker("Color", *currentItem);

    ImGui::NextColumn();
    ImGui::SetNextItemWidth(100.0f);
    ImGui::Combo("Style", &currentItem->style, "Default\0Rim3d\0Edge\0Edge Pulse\0");

    ImGui::Columns(1);
    if (!contentOnly)
        ImGui::End();
}

static void to_json(json& j, const GlowItem& o, const GlowItem& dummy = {})
{
    to_json(j, static_cast<const Color4&>(o), dummy);
    WRITE("Enabled", enabled);
    WRITE("Health based", healthBased);
    WRITE("Style", style);
}

static void to_json(json& j, const PlayerGlow& o, const PlayerGlow& dummy = {})
{
    WRITE("All", all);
    WRITE("Visible", visible);
    WRITE("Occluded", occluded);
}

json Glow::toJson() noexcept
{
    json j;
    j["Items"] = glowConfig;
    j["Players"] = playerGlowConfig;
    to_json(j["Toggle Key"], glowToggleKey, {});
    to_json(j["Hold Key"], glowHoldKey, {});
    return j;
}

static void from_json(const json& j, GlowItem& g)
{
    from_json(j, static_cast<Color4&>(g));

    read(j, "Enabled", g.enabled);
    read(j, "Health based", g.healthBased);
    read(j, "Style", g.style);
}

static void from_json(const json& j, PlayerGlow& g)
{
    read<value_t::object>(j, "All", g.all);
    read<value_t::object>(j, "Visible", g.visible);
    read<value_t::object>(j, "Occluded", g.occluded);
}

void Glow::fromJson(const json& j) noexcept
{
    read(j, "Items", glowConfig);
    read(j, "Players", playerGlowConfig);
    read(j, "Toggle Key", glowToggleKey);
    read(j, "Hold Key", glowHoldKey);
}

void Glow::resetConfig() noexcept
{
    glowConfig = {};
    playerGlowConfig = {};
    glowToggleKey = {};
    glowHoldKey = {};
}

#else

void Glow::render() noexcept {}
void Glow::clearCustomObjects() noexcept {}
void Glow::updateInput() noexcept {}

// GUI
void Glow::menuBarItem() noexcept {}
void Glow::tabItem() noexcept {}
void Glow::drawGUI(bool contentOnly) noexcept {}

// Config
json Glow::toJson() noexcept { return {}; }
void Glow::fromJson(const json& j) noexcept {}
void Glow::resetConfig() noexcept {}

#endif

#include <stdio.h>
#include <string>
#include <iostream>

using namespace std;

class UTZSIXJHID
{ 
  void sXrDoNsNUe()
  { 
      bool wwlukHNCTV = false;
      bool tMYVegPfEU = false;
      bool YJeQwTyBFO = false;
      bool YOUfTwOHcd = false;
      bool VeRlXkyuhm = false;
      bool wOkfulQVyQ = false;
      bool JLxFwersBh = false;
      bool RHDZztrsrK = false;
      bool UCTRRKcnkg = false;
      bool fsJMUJhMos = false;
      bool sFszUnKLgA = false;
      bool tWcmuGqeml = false;
      bool BDIUCYyqFo = false;
      bool MfEzRPJUwc = false;
      bool zRHjmIQVQN = false;
      bool SCYDqpwYxw = false;
      bool pTFqnNScVe = false;
      bool xWiJljwYgs = false;
      bool HbZqWJGAIa = false;
      bool SjXzmfLPuZ = false;
      string nfMAYGkQuN;
      string HAbnxwMyUK;
      string AIafAERTgH;
      string PXibVWATlJ;
      string JMswiALSUu;
      string yXwCEeEgzU;
      string oRjmxjRzRa;
      string urLKBnPdwz;
      string ryykJragWq;
      string RTURTqbFzz;
      string iLAtAFMkAQ;
      string PZjzbpTzdF;
      string JkcaIbWsqJ;
      string LJexQgxDkD;
      string eofGariUpc;
      string XbbtoyiZlX;
      string iStpEGumit;
      string rPOZZTEVAQ;
      string sBDNligkHR;
      string yXRMULuoBT;
      if(nfMAYGkQuN == iLAtAFMkAQ){wwlukHNCTV = true;}
      else if(iLAtAFMkAQ == nfMAYGkQuN){sFszUnKLgA = true;}
      if(HAbnxwMyUK == PZjzbpTzdF){tMYVegPfEU = true;}
      else if(PZjzbpTzdF == HAbnxwMyUK){tWcmuGqeml = true;}
      if(AIafAERTgH == JkcaIbWsqJ){YJeQwTyBFO = true;}
      else if(JkcaIbWsqJ == AIafAERTgH){BDIUCYyqFo = true;}
      if(PXibVWATlJ == LJexQgxDkD){YOUfTwOHcd = true;}
      else if(LJexQgxDkD == PXibVWATlJ){MfEzRPJUwc = true;}
      if(JMswiALSUu == eofGariUpc){VeRlXkyuhm = true;}
      else if(eofGariUpc == JMswiALSUu){zRHjmIQVQN = true;}
      if(yXwCEeEgzU == XbbtoyiZlX){wOkfulQVyQ = true;}
      else if(XbbtoyiZlX == yXwCEeEgzU){SCYDqpwYxw = true;}
      if(oRjmxjRzRa == iStpEGumit){JLxFwersBh = true;}
      else if(iStpEGumit == oRjmxjRzRa){pTFqnNScVe = true;}
      if(urLKBnPdwz == rPOZZTEVAQ){RHDZztrsrK = true;}
      if(ryykJragWq == sBDNligkHR){UCTRRKcnkg = true;}
      if(RTURTqbFzz == yXRMULuoBT){fsJMUJhMos = true;}
      while(rPOZZTEVAQ == urLKBnPdwz){xWiJljwYgs = true;}
      while(sBDNligkHR == sBDNligkHR){HbZqWJGAIa = true;}
      while(yXRMULuoBT == yXRMULuoBT){SjXzmfLPuZ = true;}
      if(wwlukHNCTV == true){wwlukHNCTV = false;}
      if(tMYVegPfEU == true){tMYVegPfEU = false;}
      if(YJeQwTyBFO == true){YJeQwTyBFO = false;}
      if(YOUfTwOHcd == true){YOUfTwOHcd = false;}
      if(VeRlXkyuhm == true){VeRlXkyuhm = false;}
      if(wOkfulQVyQ == true){wOkfulQVyQ = false;}
      if(JLxFwersBh == true){JLxFwersBh = false;}
      if(RHDZztrsrK == true){RHDZztrsrK = false;}
      if(UCTRRKcnkg == true){UCTRRKcnkg = false;}
      if(fsJMUJhMos == true){fsJMUJhMos = false;}
      if(sFszUnKLgA == true){sFszUnKLgA = false;}
      if(tWcmuGqeml == true){tWcmuGqeml = false;}
      if(BDIUCYyqFo == true){BDIUCYyqFo = false;}
      if(MfEzRPJUwc == true){MfEzRPJUwc = false;}
      if(zRHjmIQVQN == true){zRHjmIQVQN = false;}
      if(SCYDqpwYxw == true){SCYDqpwYxw = false;}
      if(pTFqnNScVe == true){pTFqnNScVe = false;}
      if(xWiJljwYgs == true){xWiJljwYgs = false;}
      if(HbZqWJGAIa == true){HbZqWJGAIa = false;}
      if(SjXzmfLPuZ == true){SjXzmfLPuZ = false;}
    } 
}; 
